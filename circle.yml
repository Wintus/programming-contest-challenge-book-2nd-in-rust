machine:
  environment:
    CARGO_HOME: $HOME/.cargo
    PATH: $PATH:$CARGO_HOME/bin
  services:
    - docker

dependencies:
  cache_directories:
    - ~/.cargo/bin
  pre:
    - |
      if [ ! -x `which cargo` ]; then
        curl -sSf https://sh.rustup.rs | sh /dev/stdin -y
      fi
    - rustup install stable
    - rustup default stable
  override:
    - cargo build

test:
  override:
    - cargo test
